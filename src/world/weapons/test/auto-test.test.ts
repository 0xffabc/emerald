import { expect, test } from "@rstest/core";
import { Bazooka } from "../bazooka";
import { to32xConvertedByte } from "../../../packet/core/utils";
import { CentralGun } from "../central-gun";
import { DoublePistol } from "../double-pistol";
import { FlameThrower } from "../flame-thrower";
import { HealGun } from "../heal-gun";
import { Pistol } from "../pistol";
import { RailGun } from "../rail-gun";
import { Shotgun } from "../shotgun";
import { Shuriken } from "../shuriken";
import { Sword } from "../sword";

test("Simplest weapons test", () => {
  const pid = 32;

  const tests = [
    {
      _class: Bazooka,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        4,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: CentralGun,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        1,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: DoublePistol,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        13,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: FlameThrower,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        10,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: HealGun,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        70,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: Pistol,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        12,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: RailGun,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        6,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: Shotgun,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        9,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: Shuriken,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        45,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
    {
      _class: Sword,
      expected: new Uint8Array([
        243,
        4,
        29,
        0,
        3,
        22,
        105,
        ...to32xConvertedByte(pid),
        70,
        68,
        0,
        0,
        0,
        1,
        115,
        0,
        11,
        99,
        117,
        114,
        114,
        101,
        110,
        116,
        73,
        116,
        101,
        109,
        68,
        0,
        0,
        0,
        3,
        115,
        0,
        4,
        116,
        121,
        112,
        101,
        105,
        0,
        0,
        0,
        8,
        115,
        0,
        9,
        118,
        97,
        114,
        105,
        97,
        110,
        116,
        73,
        100,
        105,
        0,
        0,
        0,
        0,
        115,
        0,
        15,
        117,
        112,
        100,
        97,
        116,
        101,
        73,
        116,
        101,
        109,
        83,
        116,
        97,
        116,
        101,
        105,
        0,
        0,
        0,
        4,
        254,
        105,
        0,
        0,
        0,
        0,
      ]),
    },
  ];

  for (const test of tests) {
    const weapon = new test._class();

    const packet = weapon.toServerUseBytes(pid);

    expect(packet).toStrictEqual(test.expected);
  }
});
